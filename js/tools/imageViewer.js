export default function imageViewer(){let s=false;let i=1;let r=false;let o=false;let a=0;let l=0;let c=0;let d=0;let f=0;const t=document.querySelector(".image-viewer-container");if(!t){console.warn("Image viewer container not found. Exiting imageViewer function.");return}const u=t.querySelector("img");if(!u){console.warn("Target image not found in image viewer container. Exiting imageViewer function.");return}const n=e=>{document.body.style.overflow=e?"hidden":"auto";e?t.classList.add("active"):t.classList.remove("active")};const e=e=>{e.preventDefault();const t=u.getBoundingClientRect();const n=e.clientX-t.left;const s=e.clientY-t.top;const r=n-t.width/2;const o=s-t.height/2;const a=i;i+=e.deltaY*-.001;i=Math.min(Math.max(.8,i),4);if(a<i){d-=r*(i-a);f-=o*(i-a)}else{d=0;f=0}u.style.transform=`translate(${d}px, ${f}px) scale(${i})`};const m=e=>{e.preventDefault();r=true;l=e.clientX;c=e.clientY;u.style.cursor="grabbing"};let g=0;const v=100;const y=e=>{if(r){const t=(new Date).getTime();if(t-g<v){return}g=t;const n=e.clientX-l;const s=e.clientY-c;d+=n;f+=s;l=e.clientX;c=e.clientY;u.style.transform=`translate(${d}px, ${f}px) scale(${i})`;o=true}};const p=e=>{if(r){e.stopPropagation()}r=false;u.style.cursor="grab"};u.addEventListener("wheel",e,{passive:false});u.addEventListener("mousedown",m,{passive:false});u.addEventListener("mousemove",y,{passive:false});u.addEventListener("mouseup",p,{passive:false});u.addEventListener("mouseleave",p,{passive:false});t.addEventListener("click",e=>{if(!o){s=false;n(s);i=1;d=0;f=0;u.style.transform=`translate(${d}px, ${f}px) scale(${i})`}o=false});const w=document.querySelectorAll(".markdown-body img, .masonry-item img, #shuoshuo-content img");const h=e=>{if(e.key==="Escape"&&s){s=false;n(s);i=1;d=0;f=0;u.style.transform=`translate(${d}px, ${f}px) scale(${i})`;document.removeEventListener("keydown",h)}};if(w.length>0){w.forEach((e,t)=>{e.addEventListener("click",()=>{a=t;s=true;n(s);u.src=e.src;document.addEventListener("keydown",h)})});const E=e=>{if(!s)return;if(e.key==="ArrowUp"||e.key==="ArrowLeft"){a=(a-1+w.length)%w.length}else if(e.key==="ArrowDown"||e.key==="ArrowRight"){a=(a+1)%w.length}else{return}const t=w[a];let n=t.src;if(t.hasAttribute("lazyload")){n=t.getAttribute("data-src");t.src=n;t.removeAttribute("lazyload")}u.src=n};document.addEventListener("keydown",E)}else{}}