import{navigationState}from"../utils.js";export const navbarShrink={navbarDom:document.querySelector(".navbar-container"),leftAsideDom:document.querySelector(".page-aside"),isnavbarShrink:false,navbarHeight:0,init(){this.navbarHeight=this.navbarDom.getBoundingClientRect().height;this.shrink();this.togglenavbarDrawerShow();this.toggleSubmenu();window.addEventListener("scroll",()=>{this.shrink()})},shrink(){const t=document.documentElement.scrollTop||document.body.scrollTop;if(!this.isnavbarShrink&&t>this.navbarHeight){this.isnavbarShrink=true;document.body.classList.add("navbar-shrink")}else if(this.isnavbarShrink&&t<=this.navbarHeight){this.isnavbarShrink=false;document.body.classList.remove("navbar-shrink")}},togglenavbarDrawerShow(){const t=[document.querySelector(".window-mask"),document.querySelector(".navbar-bar")];if(document.querySelector(".navbar-drawer")){t.push(...document.querySelectorAll(".navbar-drawer .drawer-navbar-list .drawer-navbar-item"),...document.querySelectorAll(".navbar-drawer .tag-count-item"))}t.forEach(t=>{if(!t.dataset.navbarInitialized){t.dataset.navbarInitialized=1;t.addEventListener("click",()=>{document.body.classList.toggle("navbar-drawer-show")})}});const e=document.querySelector(".navbar-container .navbar-content .logo-title");if(e&&!e.dataset.navbarInitialized){e.dataset.navbarInitialized=1;e.addEventListener("click",()=>{document.body.classList.remove("navbar-drawer-show")})}},toggleSubmenu(){const t=document.querySelectorAll("[navbar-data-toggle]");t.forEach(t=>{if(!t.dataset.eventListenerAdded){t.dataset.eventListenerAdded="true";t.addEventListener("click",function(){const t=document.querySelector('[data-target="'+this.getAttribute("navbar-data-toggle")+'"]');const e=t.children;const a=this.querySelector(".fa-chevron-right");if(t){const n=!t.classList.contains("hidden");if(a){a.classList.toggle("icon-rotated",!n)}if(n){anime({targets:e,opacity:0,translateY:-10,duration:300,easing:"easeInQuart",delay:anime.stagger(80,{start:20,direction:"reverse"}),complete:function(){t.classList.add("hidden")}})}else{t.classList.remove("hidden");anime({targets:e,opacity:[0,1],translateY:[10,0],duration:300,easing:"easeOutQuart",delay:anime.stagger(80,{start:20})})}}})}})}};try{swup.hooks.on("page:view",()=>{navbarShrink.init();navigationState.isNavigating=false});swup.hooks.on("visit:start",()=>{navigationState.isNavigating=true;document.body.classList.remove("navbar-shrink")})}catch(t){}document.addEventListener("DOMContentLoaded",()=>{navbarShrink.init()});